# Модель качества и чек‑лист (QAP)

Источник критериев: `MAD_Excersises/MAD_QAP_2025.md`.

## 0. Контекст и артефакты

Домен: iOS‑приложение подключается к домашнему LLM (Ollama) через gateway в VPN.  
Артефакты для подтверждения качества:

- `src/docs/architecture.md` — top‑level диаграмма и сетевые связи сервисов/БД.
- `src/docs/requirements_system.md` — сценарии/edge cases и критерии приемки.
- `src/docs/testing_strategy.md` — модель тестирования и планы automation/perf/load.

## 1. Модель качества (упрощенная ISO/IEC 25010)

Измерения:

1) Functional suitability & coverage  
2) Usability & UX  
3) Performance & efficiency  
4) Stability & reliability  
5) Security & privacy  

## 2. Чек‑лист по измерениям (конкретные проверки)

### 2.1. Functional suitability & coverage

- F‑COV‑1: Перечислены ключевые сценарии: подключение к gateway, загрузка списка моделей, выбор модели, отправка промпта, получение ответа.
- F‑COV‑2: Edge cases описаны: неверный URL, пустой промпт, нет доступных моделей, `401/403`, `5xx/timeout`.
- F‑COV‑3: Для каждого сценария есть критерии приемки (UI‑состояния, текст ошибок, ожидаемый ответ).
- F‑COV‑4: Реализован и проверен ручными/авто‑тестами сценарий «проверить соединение/обновить модели».

### 2.2. Usability & UX

- UX‑1: Первые шаги понятны без инструкции (подписи полей, подсказки для URL и токена).
- UX‑2: Показан статус подключения и прогресс при загрузке моделей/ответа.
- UX‑3: Пустые состояния («нет моделей», «нет ответа») содержат пояснение и следующий шаг.
- UX‑4: Ошибки понятны пользователю и предлагают действие (проверить VPN, повторить запрос).
- UX‑5: Проверена доступность (Dynamic Type, VoiceOver) на ключевых экранах.
- UX‑6: Запланирован сбор UX‑feedback (CSI/NPS prompt после завершения сценария).

### 2.3. Performance & efficiency

- PERF‑1: Измерен cold start (XCTest metrics / Instruments); есть цель/база.
- PERF‑2: Измерено время загрузки списка моделей (p50/p95) в условиях VPN/реальной сети.
- PERF‑3: Измерено время ответа на промпт (TTFB и полный ответ).
- PERF‑4: Проверено потребление трафика при типовом запросе.
- PERF‑5: Есть performance‑тест на загрузку данных (по QAP) и план load‑теста backend.

### 2.4. Stability & reliability

- REL‑1: Проверены переходы background/foreground, kill&restore.
- REL‑2: Проверены условия плохой сети (loss, high latency), ошибки отображаются корректно.
- REL‑3: Повторная попытка после восстановления сети работает без перезапуска.
- REL‑4: Есть ключевая метрика надежности + инструмент мониторинга (см. раздел 3).
- REL‑5: Crash monitoring подключен (Sentry/Crashlytics).

### 2.5. Security & privacy

- SEC‑1: Трафик между приложением и gateway идет по HTTPS/TLS (или внутри VPN) без внешнего доступа.
- SEC‑2: Токены хранятся в Keychain, не в `UserDefaults/AppStorage`.
- SEC‑3: Минимальные permissions; нет доступа к микрофону/камерам без нужды.
- SEC‑4: Логи и ошибки не содержат PII и токены; маскировка включена.
- SEC‑5: Базовый security review (OWASP MASVS L1 как ориентир).
- SEC‑6: Ollama не доступна анонимно из интернета; доступ извне — только через VPN и аутентифицированный gateway.

## 3. Self‑Check (что нужно для 2 баллов)

### 3.1. Архитектурная диаграмма (0–2)

- 0: нет диаграммы
- 1: только функциональная (экраны/сценарии)
- 2: top‑level диаграмма + сеть сервисов/микросервисов, observability (см. `src/docs/architecture.md`)

### 3.2. Модель тестирования (0–2)

- 0: нет модели
- 1: только usability тест
- 2: есть automation UI + performance‑тест + план load‑тестирования (см. `src/docs/testing_strategy.md`)

### 3.3. Метрика надежности + мониторинг (0–2)

- 0: не используется
- 1: crash rate + пример monitoring tool
- 2: дополнительная(ые) метрика(и) + зрелый мониторинг (Grafana/Prometheus/Zabbix, алерты) (см. `src/docs/metrics_monitoring_feedback.md`)

### 3.4. Feedback (CSI/NPS) (0–2)

- 0: отсутствует
- 1: кнопка feedback
- 2: периодический prompt после завершения сценария + rate‑limit (см. `src/docs/metrics_monitoring_feedback.md`)

### 3.5. Запуск на устройстве (0–2)

- 0: есть только код
- 1: запускается в IDE
- 2: установлено и работает на реальном устройстве (задокументировать шаги и скрин)
